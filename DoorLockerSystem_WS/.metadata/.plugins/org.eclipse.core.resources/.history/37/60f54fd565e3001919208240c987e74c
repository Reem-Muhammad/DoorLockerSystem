/*
 * UART.h
 *
 *  Created on: 23 Sep 2019
 *      Author: Home
 */

#ifndef UART_H_
#define UART_H_

#include "micro_config.h"
#include "common_macros.h"
#include "std_types.h"

#define ASYNCHRONOUS 0
#define SYNCHRONOUS 1

/*~~~~~~~~ Static Configurations ~~~~~~~~*/
#define UART_MODE ASYNCHRONOUS
#define DOUBLE_SPEED
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


#ifdef DOUBLE_SPEED
	#define BAUD_RATE_GENERATOR(BAUD_RATE) ( ( (F_CPU) / ( (8UL) * (BAUD_RATE) ) ) - 1 )
#else
	#define BAUD_RATE_GENERATOR(BAUD_RATE) ( ( (F_CPU) / ( (16UL) * (BAUD_RATE) ) ) - 1 )
#endif


typedef enum
{
	PARITY_DISABLED, RESERVED, EVEN_PARITY, ODD_PARITY
}Uart_ParityModeType;

typedef enum
{
	ONE_STOP_BIT, TWO_STOP_BITS
}Uart_StopBitType;

/*9-bit requires special handling. read/write operations would be different from the rest of the sizes. so should it be included in the enum or #define ?*/
typedef enum
{
	CHAR_5_, CHAR_6, CHAR_7, CHAR_8, CHAR_9 = 7
}Uart_CharSizeType;


typedef struct
{
	/*URSEL should be sit first*/
	//Uart_ModeType e_Uart_mode;
	Uart_ParityModeType e_Uart_parityMode;
	Uart_StopBitType e_Uart_stopBit;
	Uart_CharSizeType e_Uart_charSize;

	/*URSEL should be cleared first*/
	uint16 Uart_baudRate;
}Uart_ConfigType;



/*~~~~~~~~~~~~ Functions Prototypes ~~~~~~~~~~~~~*/
void UART_init(const Uart_ConfigType *config_ptr);
void UART_sendByte(uint8 data);
void UART_sendString(uint8 *str_ptr);
uint8 UART_receiveByte(void);
void UART_receiveString(uint8 *str_ptr);
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

#endif /* UART_H_ */
